{
  "name": "amper-vscode",
  "displayName": "Amper for VS Code",
  "description": "An unofficial extension to support Amper projects in VS Code.",
  "version": "0.0.1",
  "icon": "resources/logo.svg",
  "engines": {
    "vscode": "^1.107.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./dist/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "amper-explorer",
          "title": "Amper",
          "icon": "resources/logo.svg"
        }
      ]
    },
    "views": {
      "amper-explorer": [
        {
          "id": "amperProjectExplorer",
          "name": "Projects",
          "icon": "rocket"
        },
        {
          "id": "amperDependencyExplorer",
          "name": "Dependencies",
          "icon": "references"
        },
        {
          "id": "amperJdkExplorer",
          "name": "Toolchains",
          "icon": "tools"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "amperProjectExplorer",
        "contents": "Welcome to Amper! ðŸš€\n\nNo Amper project found in workspace.\n\n[$(add) Initialize New Project](command:amper-vscode.initProject)\n\n[$(folder-opened) Open Existing Project](command:vscode.openFolder)\n\n[$(book) View Documentation](https://github.com/JetBrains/amper)"
      },
      {
        "view": "amperDependencyExplorer",
        "contents": "Dependencies will appear here once you open an Amper project.\n\n[$(refresh) Refresh Dependencies](command:amper-vscode.refreshDependencies)"
      },
      {
        "view": "amperJdkExplorer",
        "contents": "JDK information will appear here after opening an Amper project.\n\n[$(refresh) Refresh](command:amper-vscode.refreshJdks)"
      }
    ],
    "commands": [
      {
        "command": "amper-vscode.openModuleEditor",
        "title": "Open Amper Visual Editor",
        "category": "Amper",
        "icon": "$(layout-panel)"
      },
      {
        "command": "amper-vscode.checkVersion",
        "title": "Amper: Check Version",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.refreshEntry",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "amper-vscode.refreshJdks",
        "title": "Refresh Toolchains",
        "icon": "$(refresh)"
      },
      {
        "command": "amper-vscode.refreshDependencies",
        "title": "Refresh Dependencies",
        "icon": "$(refresh)"
      },
      {
        "command": "amper-vscode.convertMavenProject",
        "title": "Amper: Convert Maven Project",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.runModule",
        "title": "Run Module",
        "icon": "$(play)"
      },
      {
        "command": "amper-vscode.testModule",
        "title": "Test Module",
        "icon": "$(beaker)"
      },
      {
        "command": "amper-vscode.buildModule",
        "title": "Build Module",
        "icon": "$(build)"
      },
      {
        "command": "amper-vscode.cleanModule",
        "title": "Clean Module",
        "icon": "$(trash)"
      },
      {
        "command": "amper-vscode.showTasks",
        "title": "Show Tasks",
        "icon": "$(list-unordered)"
      },
      {
        "command": "amper-vscode.showTaskGraph",
        "title": "Show Task Graph",
        "icon": "$(graph)"
      },
      {
        "command": "amper-vscode.initProject",
        "title": "Amper: Initialize Project",
        "category": "Amper",
        "icon": "$(add)"
      },
      {
        "command": "amper-vscode.updateAmper",
        "title": "Amper: Update Amper",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.cleanSharedCaches",
        "title": "Amper: Clean Shared Caches",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.cleanBootstrapCache",
        "title": "Amper: Clean Bootstrap Cache (JRE/Dist)",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.showJdkInfo",
        "title": "Amper: Show JDK Info",
        "category": "Amper"
      },
      {
        "command": "amper-vscode.openBuildTrace",
        "title": "Open Build Trace (Jaeger)",
        "category": "Amper",
        "icon": "$(pulse)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "amper-vscode.initProject",
          "when": "view == amperProjectExplorer",
          "group": "navigation@1"
        },
        {
          "command": "amper-vscode.refreshEntry",
          "when": "view == amperProjectExplorer",
          "group": "navigation@2"
        },
        {
          "command": "amper-vscode.openBuildTrace",
          "when": "view == amperProjectExplorer",
          "group": "navigation@3"
        },
        {
          "command": "amper-vscode.refreshJdks",
          "when": "view == amperJdkExplorer",
          "group": "navigation@1"
        }
      ],
      "view/item/context": [
        {
          "command": "amper-vscode.runModule",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "inline@1"
        },
        {
          "command": "amper-vscode.testModule",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "inline@2"
        },
        {
          "command": "amper-vscode.buildModule",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "inline@3"
        },
        {
          "command": "amper-vscode.cleanModule",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "inline@4"
        },
        {
          "command": "amper-vscode.showTasks",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "1_modification"
        },
        {
          "command": "amper-vscode.showTaskGraph",
          "when": "view == amperProjectExplorer && viewItem == module",
          "group": "1_modification"
        },
        {
          "command": "amper-vscode.openModuleEditor",
          "when": "resourceFilename == module.yaml",
          "group": "inline"
        }
      ],
      "editor/title": [
        {
          "command": "amper-vscode.openModuleEditor",
          "group": "navigation",
          "when": "resourceFilename == module.yaml"
        }
      ],
      "editor/context": [
        {
          "command": "amper-vscode.convertMavenProject",
          "when": "resourceFilename == pom.xml",
          "group": "amper@1"
        }
      ]
    },
    "taskDefinitions": [
      {
        "type": "amper",
        "properties": {
          "task": {
            "type": "string",
            "description": "The Amper command to run"
          },
          "module": {
            "type": "string",
            "description": "The module to run the command for"
          }
        }
      }
    ],
    "problemMatchers": [
      {
        "name": "amper-kotlin",
        "label": "Amper Kotlin Compiler",
        "owner": "kotlin",
        "source": "amper",
        "fileLocation": [
          "relative",
          "${workspaceFolder}"
        ],
        "pattern": [
          {
            "regexp": "^(e|w):\\s+(.*):\\s+\\((\\d+),\\s+(\\d+)\\):\\s+(.*)$",
            "file": 2,
            "line": 3,
            "column": 4,
            "severity": 1,
            "message": 5,
            "loop": true
          }
        ]
      }
    ],
    "jsonValidation": [
      {
        "fileMatch": "module.yaml",
        "url": "./schemas/module-schema.json"
      }
    ],
    "customEditors": [
      {
        "viewType": "amper-vscode.moduleConfigEditor",
        "displayName": "Amper Module Editor",
        "selector": [
          {
            "filenamePattern": "module.yaml"
          }
        ],
        "priority": "option"
      }
    ]
  },
  "scripts": {
    "extract-schema": "powershell -ExecutionPolicy Bypass -File tools/schema-extractor/build.ps1",
    "vscode:prepublish": "npm run extract-schema && npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src",
    "format": "eslint src --fix",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@types/vscode": "^1.107.0",
    "@vscode/test-cli": "^0.0.12",
    "@vscode/test-electron": "^2.5.2",
    "eslint": "^9.39.1",
    "ts-loader": "^9.5.4",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.1",
    "webpack": "^5.103.0",
    "webpack-cli": "^6.0.1"
  },
  "dependencies": {
    "yaml": "^2.8.2"
  }
}
